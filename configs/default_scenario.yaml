# default_scenario.yaml - PRODUCTION CONFIG (OSM DISABLED)
# Stable, tested configuration for FR1 & FR2 validation

# Grid configuration
grid:
  width: 100                    # Back to tested size
  height: 100
  cell_size_m: 1.0              # 100m Ã— 100m coverage
  obstacle_source: "generate"   # SYNTHETIC ONLY (OSM disabled)
  origin: "top_left"

# Time configuration
time:
  delta_t: 1.0
  max_steps: 2000
  video_frame_dt: 0.033

# Agent configuration
agents:
  protesters:
    count: 100
    
    spawn:
      type: "clusters"
      centers:
        - [20, 20]
        - [30, 70]
        - [70, 30]
      radius: 8
    
    # Heterogeneous agent types (3 profiles)
    types:
      cautious:
        ratio: 0.3              # 30% cautious
        speed_m_s: 1.0          # Slower
        risk_tolerance: 0.1     # Very risk-averse
      average:
        ratio: 0.5              # 50% average
        speed_m_s: 1.2          # Normal speed
        risk_tolerance: 0.3     # Moderate risk
      bold:
        ratio: 0.2              # 20% bold
        speed_m_s: 1.4          # Faster
        risk_tolerance: 0.6     # Risk-taking
    
    goals:
      strategy: "nearest_exit"
      exit_points:
        - [5, 95]
        - [95, 95]
        - [50, 5]
  
  police:
    count: 10
    spawn:
      type: "fixed"
      positions:
        - [50, 55]
        - [25, 35]
        - [75, 75]
        - [75, 25]
        - [25, 40]
        - [50, 25]
        - [50, 75]
        - [25, 50]
        - [75, 50]
        - [40, 40]
    speed_m_s: 1.5
    deploy_prob: 0.05    # INCREASED from 0.01 (5% vs 1%)
    deploy_cooldown: 50

# Hazards (FIXED FOR REALISM)
hazards:
  gas:
    diffusion_coeff: 0.08        # REDUCED: Slower spread (was 0.2)
    decay_rate: 0.005            # MUCH SLOWER: 0.5% per step (was 0.05)
    inj_intensity: 15.0          # INCREASED: Stronger (was 5.0)
    k_harm: 0.2772               # DOUBLED: More harm per concentration (was 0.1386)
    H_crit: 2.5                  # REDUCED: Easier incapacitation (was 5.0)
    concentration_min: 0.0
    concentration_max: 100.0

  water_cannon:
    enabled: true
    strength: 3             # integer cells agents are pushed
    radius: 6               # radius in cells (square radius used)
    stun_prob: 0.10         # probability to stun an affected agent
    cooldown: 30            # police cooldown steps for water cannon

  shooting:
    enabled: true
    prob_per_step: 0.002    # 0.2% chance per police per step to attempt shoot
    max_targets_per_event: 1
    fatal: false            # if True -> incapacitate, else high chance incapacitate


# Simulation
simulation:
  base_seed: 123456
  n_cell_max: 6
  store_full_traces: false

# Monte Carlo (SAFE PARALLELIZATION)
monte_carlo:
  n_rollouts: 200               # Production target
  bootstrap_samples: 1000       # Full bootstrap
  n_jobs: 4                     # Parallelization
  
  n_rollouts_dev: 50            # Development
  bootstrap_samples_dev: 200
  
  use_memmap: false             # Small enough for RAM
  aggregate_on_the_fly: true

# Output
output:
  save_events: true
  save_I_grids: true
  save_path: "artifacts/rollouts/"
  save_visualizations: true