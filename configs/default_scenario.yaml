# default_scenario.yaml - Main configuration with OSM Nairobi CBD support

# Grid configuration
grid:
  width: 500
  height: 500
  cell_size_m: 2.0              # 2 meters per cell (1km × 1km coverage)
  obstacle_source: "osm"         # 'osm' or 'generate'
  origin: "top_left"

# OSM configuration (Nairobi CBD)
osm:
  # Bounding box (lat/lon) - covers ~1km × 1km of CBD
  bbox:
    north: -1.2800              # Uhuru Highway
    south: -1.2900              # Haile Selassie Avenue  
    east: 36.8250               # Moi Avenue
    west: 36.8150               # University Way
  
  crs: "EPSG:32737"             # UTM Zone 37S (Nairobi)
  
  features:
    buildings: true
    streets: true
    parks: false
  
  cache_dir: "data/osm_cache"
  force_download: false         # Set true to refresh OSM data

# Time configuration
time:
  delta_t: 1.0
  max_steps: 2000
  video_frame_dt: 0.033         # 30fps for CV alignment

# Agent configuration
agents:
  protesters:
    count: 100
    
    spawn:
      type: "clusters"
      centers:
        - [50, 50]
        - [100, 400]
        - [400, 100]
      radius: 10
    
    # Heterogeneous agent types
    types:
      cautious:
        ratio: 0.3              # 30%
        speed_m_s: 1.0
        risk_tolerance: 0.1
      average:
        ratio: 0.5              # 50%
        speed_m_s: 1.2
        risk_tolerance: 0.3
      bold:
        ratio: 0.2              # 20%
        speed_m_s: 1.4
        risk_tolerance: 0.6
    
    goals:
      strategy: "nearest_exit"
      exit_points:
        - [10, 490]
        - [490, 490]
        - [250, 10]
  
  police:
    count: 10
    spawn:
      type: "fixed"
      positions:
        - [250, 250]
        - [100, 100]
        - [400, 400]
        - [400, 100]
        - [100, 400]
        - [250, 100]
        - [250, 400]
        - [150, 250]
        - [350, 250]
        - [200, 200]
    speed_m_s: 1.5
    deploy_prob: 0.01
    deploy_cooldown: 50

# Hazards
hazards:
  gas:
    diffusion_coeff: 0.2
    decay_rate: 0.05
    inj_intensity: 5.0
    k_harm: 0.1386              # Calibrated: 50% harm/s at C=5
    H_crit: 5.0

# Simulation
simulation:
  base_seed: 123456
  n_cell_max: 6
  store_full_traces: false

# Monte Carlo
monte_carlo:
  n_rollouts: 200               # Production
  bootstrap_samples: 1000
  n_jobs: 8
  
  n_rollouts_dev: 50            # Development (fast)
  bootstrap_samples_dev: 200
  
  use_memmap: true
  aggregate_on_the_fly: true

# Output
output:
  save_events: true
  save_I_grids: true
  save_path: "artifacts/rollouts/"
  save_visualizations: true